{% extends "base.html" %}

{% block content %}
<h2>Business Documents</h2>

<p style="color: var(--text-muted); margin-bottom: 30px;">
    Upload and manage the raw business documents used for your strategic analysis.
</p>

<div class="card">
    <h3>Upload New Document</h3>
    <form method="POST" enctype="multipart/form-data" style="display: flex; gap: 10px; align-items: center;">
        <input type="file" name="document" required style="flex: 1; margin-bottom: 0;">
        <button type="submit" style="white-space: nowrap;">Upload & Analyze</button>
    </form>
</div>

<div class="card">
    <h3>Your Documents</h3>
    
    <ul style="list-style: none; padding: 0; margin: 0;">
        {% for d in documents %}
            <li style="display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #e2e8f0;">
                
                <div style="display: flex; align-items: center; gap: 15px;">
                    <span style="font-size: 24px;">ðŸ“„</span>
                    <div>
                        <div style="font-weight: 600; color: var(--text-main);">{{ d.filename }}</div>
                        <div style="font-size: 12px; color: var(--text-muted);">
                            Uploaded on: {{ d.created_at.strftime('%Y-%m-%d') if d.created_at else 'Unknown' }}
                        </div>
                    </div>
                </div>

                <form action="{{ url_for('delete_document', doc_id=d._id) }}" method="POST" style="margin: 0;">
                    <button type="submit" 
                            style="background: #fee2e2; color: #ef4444; border: 1px solid #fecaca; padding: 8px 16px; font-size: 13px; border-radius: 6px; cursor: pointer; transition: 0.2s;"
                            onclick="return confirm('Are you sure you want to delete this document? This cannot be undone.');">
                        ðŸ—‘ Delete
                    </button>
                </form>

            </li>
        {% else %}
            <li style="padding: 20px; text-align: center; color: var(--text-muted);">
                No documents uploaded yet.
            </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}